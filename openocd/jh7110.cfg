# OpenOCD config for the StarFive JH7110

# VisionFive 2 JTAG pinout:
#
#     ~~~~~~~
#     |33 34|
# TMS |35 36| nTRST
# TCK |37 38| TDI
# GND |39 40| TDO
#     +-----+

transport select jtag
reset_config trst_only

adapter speed 10000

jtag newtap e24 cpu -irlen 5 -expected-id 0x07110cfd
jtag newtap u74mc cpu -irlen 5 -expected-id 0x07110cfd

target create u74.cpu0 riscv -chain-position u74mc.cpu -coreid 1 -rtos hwthread
target create u74.cpu1 riscv -chain-position u74mc.cpu -coreid 2 -rtos hwthread
target create u74.cpu2 riscv -chain-position u74mc.cpu -coreid 3 -rtos hwthread
target create u74.cpu3 riscv -chain-position u74mc.cpu -coreid 4 -rtos hwthread

target create s7.cpu0 riscv -chain-position u74mc.cpu -coreid 0

#target create e24.cpu0 riscv -chain-position e24.cpu -coreid 0
target smp u74.cpu0 u74.cpu1 u74.cpu2 u74.cpu3

init

u74.cpu0 arm semihosting enable
u74.cpu0 arm semihosting_redirect tcp 7777
